import{d as B,c as b,u as L,r as m,o as N,x as E,a as O,w as i,b as n,I as z,P as F,g as l,h as V,i as Y,j,k as U,l as M,m as T,p as _,q as o,t as v,F as X,y as q,s as D,v as a,n as G,z as H,_ as K}from"./index-BGuGq5gM.js";const J="/ma3ankolyoum/assets/2025-12-18-udkVOgYC.mp3",W="/ma3ankolyoum/assets/pennouti-5eGRe_v0.mp3",Q={class:"card"},Z={class:"date"},$={key:0,class:"hint"},tt={key:1,class:"hint"},et={key:2,class:"list"},st={class:"title"},at={key:0,class:"playerWrap"},ot=["src"],nt={key:0,class:"file"},rt={key:1,class:"unavailable"},it="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzBoz5JKy5BfRIXlo_rOSIYsce_9oXsLG9R07CvC3-MztLmg3vv7EYoNLFdt9YmL21tv8XYevOxedh/pub?gid=0&single=true&output=csv",lt=B({__name:"AgbiaAudioPage",setup(ct){const I=L(),f=b(()=>String(I.params.date||"").substring(0,10)),p=m(!0),c=m(!1),d=m(null),y=Object.assign({"/src/content/audio/2025-12-18.mp3":J,"/src/content/audio/coptic/pennouti.mp3":W});console.log("MP3 found:",Object.keys(y));const h={};for(const[s,t]of Object.entries(y)){const e=s.split("/").pop()||"";e&&(h[e]=t)}function C(s){const t=String(s!=null?s:"").trim();return t?/^https?:\/\//i.test(t)?t:h[t]||"":""}function w(s){const t=s.target;document.querySelectorAll("audio").forEach(r=>{r!==t&&r.pause()})}function R(s){const t={};return Object.keys(s||{}).forEach(e=>{const r=String(e).trim().toLowerCase().replace(/\s+/g,"_");t[r]=s[e]}),t}function S(s){try{const t=new URL(s);return decodeURIComponent(t.pathname.split("/").pop()||"")}catch(t){return""}}const P=[{key:"baker",title:"صلاة باكر"},{key:"third",title:"صلاة الساعة الثالثة"},{key:"sixth",title:"صلاة الساعة السادسة"},{key:"ninth",title:"صلاة الساعة التاسعة"},{key:"sunset",title:"صلاة الغروب"},{key:"sleep",title:"صلاة النوم"}],x=b(()=>{const s=d.value;return s?P.map(t=>{const e=C(s[t.key]);return{...t,src:e,fileName:e?S(e):""}}):[]});async function g(){p.value=!0,c.value=!1,d.value=null;try{const t=await(await fetch(it,{cache:"no-store"})).text(),r=F.parse(t,{header:!0,skipEmptyLines:!0}).data.map(u=>R(u)).filter(u=>u.date_iso),A=f.value,k=r.find(u=>String(u.date_iso).trim().substring(0,10)===A)||null;k?(d.value=k,c.value=!0):c.value=!1}catch(s){c.value=!1,d.value=null}finally{p.value=!1}}return N(g),E(f,g),(s,t)=>(a(),O(n(z),{dir:"rtl"},{default:i(()=>[l(n(T),{translucent:!0},{default:i(()=>[l(n(V),null,{default:i(()=>[l(n(Y),{slot:"start"},{default:i(()=>[l(n(j),{"default-href":"/"})]),_:1}),l(n(U),null,{default:i(()=>[...t[0]||(t[0]=[M("صوت الأجبية",-1)])]),_:1})]),_:1})]),_:1}),l(n(D),{class:"ion-padding"},{default:i(()=>[_("div",Q,[_("div",Z,v(f.value),1),p.value?(a(),o("div",$,"جاري تحميل البيانات...")):c.value?(a(),o("div",et,[(a(!0),o(X,null,q(x.value,e=>(a(),o("div",{key:e.key,class:G(["item",{off:!e.src}])},[_("div",st,v(e.title),1),e.src?(a(),o("div",at,[_("audio",{controls:"",preload:"none",src:e.src,style:{width:"100%"},onPlay:w},null,40,ot),e.fileName?(a(),o("div",nt,v(e.fileName),1)):H("",!0)])):(a(),o("div",rt,"غير متاح"))],2))),128))])):(a(),o("div",tt,"لا يوجد بيانات لهذا اليوم."))])]),_:1})]),_:1}))}}),dt=K(lt,[["__scopeId","data-v-82bcba30"]]);export{dt as default};
