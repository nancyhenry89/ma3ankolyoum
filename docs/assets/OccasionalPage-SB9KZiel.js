import{d as x,r as f,C,c as e,u as E,A as m,B as p,o as N,a as T,w as n,b as a,I as U,g as o,h as b,i as L,j as P,k as A,l as O,t as _,m as $,p as g,q as y,z as h,s as q,v as r}from"./index-Dhes69vG.js";const H={class:"card"},M=["src"],V={key:0,style:{"margin-top":"12px",opacity:".8"}},z=["innerHTML"],D=x({__name:"OccasionalPage",setup(F){const s=E(),i=f(null),l=f(""),v=new URL("/",window.location.origin).toString(),S=C.isNativePlatform()?"https://nancyhenry89.github.io/ma3ankolyoum/content":new URL("content",v).toString().replace(/\/$/,""),w=e(()=>decodeURIComponent(String(s.params.file||"")).trim()),u=e(()=>String(s.query.data||"").trim()),c=e(()=>{if(!u.value)return"";const t=m.parse(u.value,{breaks:!0,gfm:!0});return p.sanitize(String(t),{USE_PROFILES:{html:!0}})});function R(t){return/\.(mp3|m4a|wav|ogg)$/i.test(t)?t:"".concat(t,".mp3")}const I=e(()=>{const t=R(w.value);return"".concat(S,"/occasional/").concat(encodeURIComponent(t))}),k=e(()=>String(s.query.title||"").trim()||"Occasional"),d=e(()=>String(s.query.t||"").trim());return e(()=>{if(!d.value)return"";const t=m.parse(d.value,{breaks:!0,gfm:!0});return p.sanitize(String(t),{USE_PROFILES:{html:!0}})}),N(async()=>{var t;try{await((t=i.value)==null?void 0:t.play())}catch(B){}}),(t,B)=>(r(),T(a(U),null,{default:n(()=>[o(a($),null,{default:n(()=>[o(a(b),null,{default:n(()=>[o(a(L),{slot:"start"},{default:n(()=>[o(a(P),{"default-href":"/"})]),_:1}),o(a(A),null,{default:n(()=>[O(_(k.value),1)]),_:1})]),_:1})]),_:1}),o(a(q),{class:"ion-padding"},{default:n(()=>[g("div",H,[g("audio",{ref_key:"audioRef",ref:i,src:I.value,controls:"",playsinline:"",preload:"metadata",style:{width:"100%"}},null,8,M),l.value?(r(),y("p",V,_(l.value),1)):h("",!0),c.value?(r(),y("div",{key:1,class:"md",style:{"margin-top":"20px","text-align":"center","font-weight":"bold","font-family":"Noto Kufi Arabic,system-ui,sans-serif"},innerHTML:c.value},null,8,z)):h("",!0)])]),_:1})]),_:1}))}});export{D as default};
