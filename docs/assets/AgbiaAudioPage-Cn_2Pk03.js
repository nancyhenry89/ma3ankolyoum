import{d as B,c as b,u as L,r as v,o as N,x as O,a as E,w as i,b as n,I as z,P as F,g as c,h as M,i as V,j as Y,k as j,l as U,m as T,p as _,q as a,t as m,F as X,y as q,s as D,v as o,n as G,z as H,_ as J}from"./index-B2iD6t7E.js";const K="/assets/2025-12-18-udkVOgYC.mp3",W="/assets/2026-1-1-eb2oro-CMrkM1JO.mp3",Q="/assets/pennouti-5eGRe_v0.mp3",Z={class:"card"},$={class:"date"},tt={key:0,class:"hint"},et={key:1,class:"hint"},st={key:2,class:"list"},ot={class:"title"},at={key:0,class:"playerWrap"},nt=["src"],rt={key:0,class:"file"},it={key:1,class:"unavailable"},ct="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzBoz5JKy5BfRIXlo_rOSIYsce_9oXsLG9R07CvC3-MztLmg3vv7EYoNLFdt9YmL21tv8XYevOxedh/pub?gid=0&single=true&output=csv",lt=B({__name:"AgbiaAudioPage",setup(ut){const C=L(),f=b(()=>String(C.params.date||"").substring(0,10)),p=v(!0),l=v(!1),d=v(null),y=Object.assign({"/src/content/audio/2025-12-18.mp3":K,"/src/content/audio/coptic/2026-1-1-eb2oro.mp3":W,"/src/content/audio/coptic/pennouti.mp3":Q});console.log("MP3 found:",Object.keys(y));const h={};for(const[s,t]of Object.entries(y)){const e=s.split("/").pop()||"";e&&(h[e]=t)}function I(s){const t=String(s!=null?s:"").trim();return t?/^https?:\/\//i.test(t)?t:h[t]||"":""}function w(s){const t=s.target;document.querySelectorAll("audio").forEach(r=>{r!==t&&r.pause()})}function R(s){const t={};return Object.keys(s||{}).forEach(e=>{const r=String(e).trim().toLowerCase().replace(/\s+/g,"_");t[r]=s[e]}),t}function S(s){try{const t=new URL(s);return decodeURIComponent(t.pathname.split("/").pop()||"")}catch(t){return""}}const P=[{key:"baker",title:"صلاة باكر"},{key:"third",title:"صلاة الساعة الثالثة"},{key:"sixth",title:"صلاة الساعة السادسة"},{key:"ninth",title:"صلاة الساعة التاسعة"},{key:"sunset",title:"صلاة الغروب"},{key:"sleep",title:"صلاة النوم"}],x=b(()=>{const s=d.value;return s?P.map(t=>{const e=I(s[t.key]);return{...t,src:e,fileName:e?S(e):""}}):[]});async function g(){p.value=!0,l.value=!1,d.value=null;try{const t=await(await fetch(ct,{cache:"no-store"})).text(),r=F.parse(t,{header:!0,skipEmptyLines:!0}).data.map(u=>R(u)).filter(u=>u.date_iso),A=f.value,k=r.find(u=>String(u.date_iso).trim().substring(0,10)===A)||null;k?(d.value=k,l.value=!0):l.value=!1}catch(s){l.value=!1,d.value=null}finally{p.value=!1}}return N(g),O(f,g),(s,t)=>(o(),E(n(z),{dir:"rtl"},{default:i(()=>[c(n(T),{translucent:!0},{default:i(()=>[c(n(M),null,{default:i(()=>[c(n(V),{slot:"start"},{default:i(()=>[c(n(Y),{"default-href":"/"})]),_:1}),c(n(j),null,{default:i(()=>[...t[0]||(t[0]=[U("صوت الأجبية",-1)])]),_:1})]),_:1})]),_:1}),c(n(D),{class:"ion-padding"},{default:i(()=>[_("div",Z,[_("div",$,m(f.value),1),p.value?(o(),a("div",tt,"جاري تحميل البيانات...")):l.value?(o(),a("div",st,[(o(!0),a(X,null,q(x.value,e=>(o(),a("div",{key:e.key,class:G(["item",{off:!e.src}])},[_("div",ot,m(e.title),1),e.src?(o(),a("div",at,[_("audio",{controls:"",preload:"none",src:e.src,style:{width:"100%"},onPlay:w},null,40,nt),e.fileName?(o(),a("div",rt,m(e.fileName),1)):H("",!0)])):(o(),a("div",it,"غير متاح"))],2))),128))])):(o(),a("div",et,"لا يوجد بيانات لهذا اليوم."))])]),_:1})]),_:1}))}}),_t=J(lt,[["__scopeId","data-v-82bcba30"]]);export{_t as default};
