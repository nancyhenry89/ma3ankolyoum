import{d as L,r,c as P,o as E,u as N,a as R,w as l,n as z,b as o,I as O,e as T,f as D,g as i,h as V,i as X,j as Y,k as M,l as j,t as f,m as A,p as n,q as _,s as F,P as H,v as m,_ as K}from"./index-DUmPkr7u.js";const q={class:"wrap"},G={class:"pageTitle"},J={key:0,class:"card bigCard"},U={key:1,class:"card bigCard"},Q={class:"text alignRight"},W={key:2,class:"hint"},Z="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzBoz5JKy5BfRIXlo_rOSIYsce_9oXsLG9R07CvC3-MztLmg3vv7EYoNLFdt9YmL21tv8XYevOxedh/pub?gid=0&single=true&output=csv",$=L({__name:"SaintPage",setup(tt){const S=N(),g=r(localStorage.getItem("mk_theme")||"light"),k=r(Number(localStorage.getItem("mk_fontScale")||"1")),C=P(()=>g.value==="dark"?"theme-dark":"theme-light");function I(){document.documentElement.style.setProperty("--mk-fontScale",String(k.value)),document.documentElement.setAttribute("data-mk-theme",g.value)}const c=r(""),u=r(""),d=r(!0),v=r("");function b(s){const t={};return Object.keys(s||{}).forEach(e=>{const a=String(e).trim().toLowerCase().replace(/\s+/g,"_");t[a]=s[e]}),t}function p(s,...t){for(const e of t){const a=e.trim().toLowerCase().replace(/\s+/g,"_");if(s[a]!==void 0&&s[a]!==null&&String(s[a]).trim()!=="")return s[a]}return""}async function w(){const t=await(await fetch(Z,{cache:"no-store"})).text();return H.parse(t,{header:!0,skipEmptyLines:!0}).data.map(a=>b(a)).filter(a=>a.date_iso)}async function y(s){const e=(await w()).find(B=>String(B.date_iso||"").trim().substring(0,10)===s)||null;if(!e)return;const a=p(e,"saint"),h=p(e,"saint_story","saintstory","synaxarium","synaxarion");c.value=a,u.value=h,D(s,{dateISO:s,saint:a,saintStory:h})}async function x(s){const t=String(s||"").trim().substring(0,10);if(!t){d.value=!1;return}v.value="";const e=T(t);if(e!=null&&e.saint||e!=null&&e.saintStory){c.value=e.saint||"",u.value=e.saintStory||"",d.value=!1,y(t).catch(console.error);return}d.value=!0,c.value="",u.value="";try{await y(t)}catch(a){console.error(a),v.value="حصلت مشكلة في تحميل السنكسار. تأكدي من الإنترنت."}finally{d.value=!1}}return E(()=>{I();const s=String(S.params.dateISO||"").substring(0,10);x(s).catch(console.error)}),(s,t)=>(m(),R(o(O),{class:z(["saintPage",C.value]),dir:"rtl"},{default:l(()=>[i(o(A),{translucent:!0},{default:l(()=>[i(o(V),null,{default:l(()=>[i(o(X),{slot:"start"},{default:l(()=>[i(o(Y),{"default-href":"/"})]),_:1}),i(o(M),null,{default:l(()=>[j(f(c.value||"السنكسار"),1)]),_:1})]),_:1})]),_:1}),i(o(F),{fullscreen:!0,class:"content"},{default:l(()=>[t[2]||(t[2]=n("div",{class:"bg"},null,-1)),n("div",q,[n("div",G,f(c.value),1),d.value?(m(),_("div",J,[...t[0]||(t[0]=[n("div",{class:"skeleton-line"},null,-1),n("div",{class:"skeleton-line"},null,-1),n("div",{class:"skeleton-line short"},null,-1)])])):u.value?(m(),_("div",U,[n("p",Q,f(u.value),1)])):(m(),_("div",W,f(v.value||"لا توجد قصة متاحة لهذا اليوم."),1)),t[1]||(t[1]=n("div",{class:"space"},null,-1))])]),_:1})]),_:1},8,["class"]))}}),st=K($,[["__scopeId","data-v-50144d93"]]);export{st as default};
